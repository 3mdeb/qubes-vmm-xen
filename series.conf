
patches.fedora/xen.use.fedora.ipxe.patch
patches.fedora/xen.fedora.efi.build.patch
patches.fedora/xen.gcc5.fix.patch
# EFI workarounds
patches.misc/0001-EFI-early-Add-noexit-to-inhibit-calling-ExitBootServices.patch
patches.misc/0002-efi-Ensure-incorrectly-typed-runtime-services-get-ma.patch
patches.misc/0001-Add-xen.cfg-options-for-mapbs-and-noexitboot.patch

# backports
patches.misc/0001-xenalyze-fix-misleading-indentation.patch
patches.misc/0001-xenalyze-remove-cr3_compare_total.patch
patches.misc/0001-vtpmmgr-fix-misleading-indentation.patch
patches.misc/0001-libxc-prefer-using-privcmd-character-device.patch
patches.misc/0001-libfsimage-replace-deprecated-readdir_r-with-readdir.patch
patches.misc/0001-libxl-replace-deprecated-readdir_r-with-readdir.patch
patches.misc/0001-xen-move-domain-lookup-for-getdomaininfo-to-the-same.patch
patches.misc/0002-flask-policy-allow-device-model-to-get-info-about-it.patch
patches.misc/0002-xen-allow-XEN_DOMCTL_getdomaininfo-for-device-model-.patch
patches.misc/patch-libacpi-fixes-for-iasl-20180427.patch

# Stable patches on top of RELEASE-4.6.6 (there will be no 4.6.7)
patches.stable/0001-x86-grant-disallow-misaligned-PTEs.patch
patches.stable/0002-gnttab-split-maptrack-lock-to-make-it-fulfill-its-pu.patch
patches.stable/0003-gnttab-correct-pin-status-fixup-for-copy.patch
patches.stable/0004-gnttab-don-t-use-possibly-unbounded-tail-calls.patch
patches.stable/0005-gnttab-fix-transitive-grant-handling.patch
patches.stable/0006-gnttab-fix-don-t-use-possibly-unbounded-tail-calls.patch
patches.stable/0007-arm-mm-release-grant-lock-on-xenmem_add_to_physmap_o.patch
patches.stable/0008-xen-mm-make-sure-node-is-less-than-MAX_NUMNODES.patch
patches.stable/0009-grant_table-fix-GNTTABOP_cache_flush-handling.patch
patches.stable/0010-tools-xenstore-dont-unlink-connection-object-twice.patch
patches.stable/0011-gnttab-also-validate-PTE-permissions-upon-destroy-re.patch
patches.stable/0012-xen-page_alloc-Cover-memory-unreserved-after-boot-in.patch
patches.stable/0013-xen-arm-Correctly-report-the-memory-region-in-the-du.patch
patches.stable/0014-x86-don-t-allow-MSI-pIRQ-mapping-on-unowned-device.patch
patches.stable/0015-x86-enforce-proper-privilege-when-un-mapping-pIRQ-s.patch
patches.stable/0016-x86-MSI-disallow-redundant-enabling.patch
patches.stable/0017-x86-IRQ-conditionally-preserve-irq-pirq-mapping-on-m.patch
patches.stable/0018-x86-FLASK-fix-unmap-domain-IRQ-XSM-hook.patch
patches.stable/0019-x86-ioreq-server-correctly-handle-bogus-XEN_DMOP_-un.patch
patches.stable/0020-x86-HVM-prefill-partially-used-variable-on-emulation.patch
patches.stable/0021-x86-limit-linear-page-table-use-to-a-single-level.patch
patches.stable/0022-x86-don-t-store-possibly-stale-TLB-flush-time-stamp.patch
patches.stable/0023-x86-don-t-allow-page_unlock-to-drop-the-last-type-re.patch
patches.stable/0024-x86-Disable-the-use-of-auto-translated-PV-guests.patch
patches.stable/0025-x86-shadow-Don-t-create-self-linear-shadow-mappings-.patch
patches.stable/0026-x86-cpu-Fix-IST-handling-during-PCPU-bringup.patch
patches.stable/0027-gnttab-fix-pin-count-page-reference-race.patch
patches.stable/0028-x86-mm-Make-PV-linear-pagetables-optional.patch
patches.stable/0029-x86-don-t-wrongly-trigger-linear-page-table-assertio.patch
patches.stable/0030-x86-shadow-correct-SH_LINEAR-mapping-detection-in-sh.patch
patches.stable/0031-x86-pod-prevent-infinite-loop-when-shattering-large-.patch
patches.stable/0032-p2m-Always-check-to-see-if-removing-a-p2m-entry-actu.patch
patches.stable/0033-p2m-Check-return-value-of-p2m_set_entry-when-decreas.patch
patches.stable/0034-x86-don-t-wrongly-trigger-linear-page-table-assertio.patch
patches.stable/0035-x86-mm-don-t-wrongly-set-page-ownership.patch
patches.stable/0036-x86-shadow-fix-refcount-overflow-check.patch
patches.stable/0037-x86-shadow-fix-ref-counting-error-handling.patch
patches.stable/0038-x86-paging-don-t-unconditionally-BUG-on-finding-SHAR.patch
patches.stable/0039-x86-entry-Remove-support-for-partial-cpu_user_regs-f.patch
patches.stable/0040-x86-mm-Always-set-_PAGE_ACCESSED-on-L4e-updates.patch
patches.stable/0041-x86-Meltdown-band-aid-against-malicious-64-bit-PV-gu.patch
patches.stable/0042-x86-allow-Meltdown-band-aid-to-be-disabled.patch
patches.stable/0043-x86-microcode-Add-support-for-fam17h-microcode-loadi.patch
patches.stable/0044-x86-alt-Break-out-alternative-asm-into-a-separate-he.patch
patches.stable/0045-x86-alt-Introduce-ALTERNATIVE-_2-macros.patch
patches.stable/0046-x86-entry-Rearrange-RESTORE_ALL-to-restore-register-.patch
patches.stable/0047-x86-hvm-Use-SAVE_ALL-to-construct-the-cpu_user_regs-.patch
patches.stable/0048-x86-entry-Erase-guest-GPR-state-on-entry-to-Xen.patch
patches.stable/0049-common-wait-Clarifications-to-wait-infrastructure.patch
patches.stable/0050-x86-Support-compiling-with-indirect-branch-thunks.patch
patches.stable/0051-x86-Support-indirect-thunks-from-assembly-code.patch
patches.stable/0052-x86-boot-Report-details-of-speculative-mitigations.patch
patches.stable/0053-x86-amd-Try-to-set-lfence-as-being-Dispatch-Serialis.patch
patches.stable/0054-x86-Introduce-alternative-indirect-thunks.patch
patches.stable/0055-x86-feature-Definitions-for-Indirect-Branch-Controls.patch
patches.stable/0056-x86-cmdline-Introduce-a-command-line-option-to-disab.patch
patches.stable/0057-x86-cpuid-Handling-of-IBRS-IBPB-STIBP-and-IBRS-for-g.patch
patches.stable/0058-x86-msr-Emulation-of-MSR_-SPEC_CTRL-PRED_CMD-for-gue.patch
patches.stable/0059-x86-migrate-Move-MSR_SPEC_CTRL-on-migrate.patch
patches.stable/0060-x86-hvm-Permit-guests-direct-access-to-MSR_-SPEC_CTR.patch
patches.stable/0061-x86-entry-Organise-the-use-of-MSR_SPEC_CTRL-at-each-.patch
patches.stable/0062-x86-entry-Organise-the-clobbering-of-the-RSB-RAS-on-.patch
patches.stable/0063-x86-entry-Avoid-using-alternatives-in-NMI-MC-paths.patch
patches.stable/0064-x86-boot-Calculate-the-most-appropriate-BTI-mitigati.patch
patches.stable/0065-x86-ctxt-Issue-a-speculation-barrier-between-vcpu-co.patch
patches.stable/0066-x86-idle-Clear-SPEC_CTRL-while-idle.patch
patches.stable/0067-xen-arm-Add-macros-to-handle-the-MIDR.patch
patches.stable/0068-xen-arm-Add-cpu_hwcap-bitmap.patch
patches.stable/0069-xen-arm-cpufeature-Provide-an-helper-to-check-if-a-c.patch
patches.stable/0070-xen-arm-Detect-silicon-revision-and-set-cap-bits-acc.patch
patches.stable/0071-xen-arm-Introduce-enable-callback-to-enable-a-capabi.patch
patches.stable/0072-xen-arm64-Add-missing-MIDR-values-for-Cortex-A72-A73.patch
patches.stable/0073-xen-arm-cpuerrata-Add-MIDR_ALL_VERSIONS.patch
patches.stable/0074-xen-arm64-Add-skeleton-to-harden-the-branch-predicto.patch
patches.stable/0075-xen-arm64-Implement-branch-predictor-hardening-for-a.patch
patches.stable/0076-xen-arm32-entry-Consolidate-DEFINE_TRAP_ENTRY_-macro.patch
patches.stable/0077-xen-arm32-Add-missing-MIDR-values-for-Cortex-A17-and.patch
patches.stable/0078-xen-arm32-entry-Add-missing-trap_reset-entry.patch
patches.stable/0079-xen-arm32-Add-skeleton-to-harden-branch-predictor-al.patch
patches.stable/0080-xen-arm32-Invalidate-BTB-on-guest-exit-for-Cortex-A1.patch
patches.stable/0081-xen-arm32-Invalidate-icache-on-guest-exist-for-Corte.patch
patches.stable/0082-xen-arm32-entry-Document-the-purpose-of-r11-in-the-t.patch
patches.stable/0083-xen-arm-cpuerrata-Actually-check-errata-on-non-boot-.patch
patches.stable/0084-x86-PV-correctly-count-MSRs-to-migrate.patch
patches.stable/0085-x86-hvm-Don-t-corrupt-the-HVM-context-stream-when-wr.patch
patches.stable/0086-memory-don-t-implicitly-unpin-for-decrease-reservati.patch
patches.stable/0087-gnttab-ARM-don-t-corrupt-shared-GFN-array.patch
patches.stable/0088-gnttab-don-t-blindly-free-status-pages-upon-version-.patch
patches.stable/0089-x86-two-fixes-to-Spectre-v2-backports.patch
patches.stable/0090-tools-libxc-Avoid-generating-inappropriate-zero-cont.patch
patches.stable/0091-tools-libxc-Fix-restoration-of-PV-MSRs-after-migrate.patch
patches.stable/0092-xen-arm-Flush-TLBs-before-turning-on-the-MMU-to-avoi.patch
patches.stable/0093-x86-spec_ctrl-Fix-several-bugs-in-SPEC_CTRL_ENTRY_FR.patch
patches.stable/0094-x86-entry-Fix-passing-6th-argument-for-compat-hyperc.patch
patches.stable/0095-x86-Move-microcode-loading-earlier.patch
patches.stable/0096-x86-PV-also-cover-Dom0-in-SPEC_CTRL-PRED_CMD-emulati.patch
patches.stable/0097-libxl-Specify-format-of-inserted-cdrom.patch
patches.stable/0098-x86-fix-slow-int80-path-after-XPTI-additions.patch
patches.stable/0099-x86-traps-Fix-dr6-handing-in-DB-handler.patch
patches.stable/0100-x86-pv-Move-exception-injection-into-compat_-test_al.patch
patches.stable/0101-x86-traps-Use-an-Interrupt-Stack-Table-for-DB.patch
patches.stable/0102-x86-traps-Fix-handling-of-DB-exceptions-in-hyperviso.patch
patches.stable/0103-x86-vpt-add-support-for-IO-APIC-routed-interrupts.patch
patches.stable/0104-x86-HVM-guard-against-emulator-driving-ioreq-state-i.patch
patches.stable/0105-x86-emul-Fix-emulator-test-harness-build-following-t.patch
patches.stable/0106-x86-emul-Fix-emulator-test-harness-build-following-a.patch
patches.stable/0107-x86-pv-Protect-multicalls-against-Spectre-v2-Branch-.patch
patches.stable/0108-x86-correct-ordering-of-operations-during-S3-resume.patch
patches.stable/0109-x86-suppress-BTI-mitigations-around-S3-suspend-resum.patch
patches.stable/0110-x86-msr-Correct-the-emulation-behaviour-of-MSR_PRED_.patch
patches.stable/0111-x86-spec_ctrl-Updates-to-retpoline-safety-decision-m.patch
patches.stable/0112-xpti-fix-bug-in-double-fault-handling.patch
patches.stable/0113-x86-spec_ctrl-Read-MSR_ARCH_CAPABILITIES-only-once.patch
patches.stable/0114-x86-spec_ctrl-Express-Xen-s-choice-of-MSR_SPEC_CTRL-.patch
patches.stable/0115-x86-spec_ctrl-Merge-bti_ist_info-and-use_shadow_spec.patch
patches.stable/0116-x86-spec_ctrl-Fold-the-XEN_IBRS_-SET-CLEAR-ALTERNATI.patch
patches.stable/0117-x86-spec_ctrl-Rename-bits-of-infrastructure-to-avoid.patch
patches.stable/0118-x86-spec_ctrl-Elide-MSR_SPEC_CTRL-handling-in-idle-c.patch
patches.stable/0119-x86-spec_ctrl-Split-X86_FEATURE_SC_MSR-into-PV-and-H.patch
patches.stable/0120-x86-spec_ctrl-Explicitly-set-Xen-s-default-MSR_SPEC_.patch
patches.stable/0121-x86-cpuid-Improvements-to-guest-policies-for-specula.patch
patches.stable/0122-x86-spec_ctrl-Introduce-a-new-spec-ctrl-command-line.patch
patches.stable/0123-x86-AMD-Mitigations-for-GPZ-SP4-Speculative-Store-By.patch
patches.stable/0124-x86-Intel-Mitigations-for-GPZ-SP4-Speculative-Store-.patch
patches.stable/0125-x86-msr-Virtualise-MSR_SPEC_CTRL.SSBD-for-guests-to-.patch
patches.stable/0126-x86-move-invocations-of-hvm_flush_guest_tlbs.patch
patches.stable/0127-x86-invpcid-support.patch
patches.stable/0128-x86-xpti-avoid-copying-L4-page-table-contents-when-p.patch
patches.stable/0129-xen-x86-add-a-function-for-modifying-cr3.patch
patches.stable/0130-xen-x86-support-per-domain-flag-for-xpti.patch
patches.stable/0131-xen-x86-use-invpcid-for-flushing-the-TLB.patch
patches.stable/0132-xen-x86-disable-global-pages-for-domains-with-XPTI-a.patch
patches.stable/0133-xen-x86-use-flag-byte-for-decision-whether-xen_cr3-i.patch
patches.stable/0134-xen-x86-convert-pv_guest_cr4_to_real_cr4-to-a-functi.patch
patches.stable/0135-xen-x86-add-some-cr3-helpers.patch
patches.stable/0136-xen-x86-use-PCID-feature.patch
patches.stable/0137-x86-re-enable-XPTI-PCID-as-needed-in-switch_native.patch
patches.stable/0138-x86-don-t-enable-XPTI-on-idle-domain.patch
patches.stable/0139-x86-Support-fully-eager-FPU-context-switching.patch
patches.stable/0140-x86-spec-ctrl-Mitigations-for-LazyFPU.patch
patches.stable/0141-x86-correct-default_xen_spec_ctrl-calculation.patch
patches.stable/0142-x86-mm-don-t-bypass-preemption-checks.patch
patches.stable/0143-x86-Refine-checks-in-DB-handler-for-faulting-conditi.patch
patches.stable/0144-x86-EFI-fix-FPU-state-handling-around-runtime-calls.patch
patches.stable/0145-x86-EFI-further-correct-FPU-state-handling-around-ru.patch
patches.stable/0146-x86-HVM-don-t-cause-NM-to-be-raised-in-Xen.patch

# Security fixes
patches.security/xsa155-xen-0001-xen-Add-RING_COPY_REQUEST.patch
patches.security/xsa155-xen-0002-blktap2-Use-RING_COPY_REQUEST.patch
# adjust XSA-240 to disable PV linear pagetables by default
patches.security/xsa240-0002-x86-mm-Disable-PV-linear-pagetables-by-default.patch

# Backport improved early microcode loading to allow usage of BTI related
# microcode updates without updating the BIOS.
patches.security/e64f22df-x86-microcode-Avoid-undefined-behaviour-from-signed-.patch
patches.security/x86-check-feature-flags-after-resume.patch

# Upstreamable patches
patches.libxl/xen-libxl-error-write-perm.patch
patches.libxl/xen-xl-create-quiet.patch
#patches.libxl/libxl-allow-PHY-backend-for-files-allocate-loop-devi.patch
#patches.libxl/libxl-do-not-call-default-block-script.patch
patches.libxl/libxl-make-nic-bridge-parameter-optional-do-not-fill.patch
patches.libxl/libxl-do-not-for-backend-on-PCI-remove-when-backend-.patch
patches.libxl/libxl-fix-libxl_device_-_remove-with-driver-domain-s.patch
patches.libxl/libxl-suspend.patch
patches.misc/stubdom-make-GMP-aware-that-it-s-being-cross-compiled.patch
patches.misc/stubdom-gmp-compile-fix.patch
patches.libxl/0001-libxl-attach-xen-pciback-only-to-PV-domains.patch
patches.libxl/0002-libxl-attach-PCI-device-to-qemu-only-after-setting-p.patch
patches.libxl/0003-libxl-don-t-try-to-manipulate-json-config-for-stubdo.patch
patches.misc/hvmpt01-minios-exprom-size.patch
patches.misc/hvmpt02-disable-msi-caps.patch
patches.misc/hvmpt03-passthrough-log.patch
patches.misc/hvmpt04-minios-nomask-bar-addrs.patch
patches.misc/hvmpt05-hide-pio-bars.patch
patches.misc/hvmpt06-fix-msix.patch


patches.misc/libxc-fix-xc_gntshr_munmap-semantic.patch
patches.misc/minios-ignore-close-0.patch
patches.misc/libvchan-Fix-cleanup-when-xc_gntshr_open-failed.patch
patches.misc/qemu-docs-utf8.patch
patches.libxl/0001-libxl-trigger-attach-events-for-devices-attached-bef.patch

patches.misc/minios-remove-net-device-instead-of-preparing-for-re.patch
patches.misc/xenconsole-sanitize-ESC-in-log.patch
patches.misc/qemu-keyboard-leds.patch
patches.misc/0001-tools-hotplug-Add-native-systemd-xendriverdomain.ser.patch
patches.misc/0001-systemd-use-standard-dependencies-for-xendriverdomai.patch


# GCC7/8 fixes
patches.libxl/0001-tools-include-sys-sysmacros.h-on-Linux.patch
patches.misc/tools-misc-xenlockprof-fix-possible-format-string-overflow.patch
patches.misc/v2-tools-fix-several-format-truncation-warnings-with-GCC-7.patch
patches.misc/stubdom-fix-vtpm-compilation-on-GCC-7.patch
patches.misc/vtpmmgr-make-inline-functions-static.patch
patches.misc/mini-os-link-to-libgcc.a-to-fix-build-with-gcc7.patch
# this probably breaks qemu-xen, but we don't use it anyway
patches.misc/qemu-acpi-dsdt-compile-workaround.patch
patches.misc/0001-tools-libxc-fix-strncpy-size.patch
patches.misc/tools-misc-fix-hypothetical-buffer-overflow-in-xen-l.patch
patches.misc/tools-blktap2-fix-hypothetical-buffer-overflow.patch
patches.misc/tools-blktap2-fix-possible-0-truncation.patch
patches.misc/tools-xenpmd-fix-possible-0-truncation.patch
patches.misc/tools-gdbsx-fix-Wstringop-truncation-warning.patch
patches.misc/tools-kdd-mute-spurious-gcc-warning.patch
patches.misc/stubdom-apply-gcc-8-fix-for-tpm-emulator.patch
patches.misc/0001-x86-fix-section-type-mismatch-in-mm.c.patch
patches.misc/xen-disable-cf-protection.patch
patches.misc/xen-efi-link-gcc8.patch



# TODO? patches.libxl/xen-libxl-stubdom-pci-create.patch
# TODO patches.libxl/xen-libxl-devid-to-nic-domid.patch

# vchan for stubdom:
patches.misc/0100-minios-enhance-xenstore-available-for-stubdoms.patch
patches.misc/0101-libvchan-create-xenstore-entries-in-one-transaction.patch
patches.misc/0102-libvchan-remove-unnecessary-includes.patch
patches.misc/0103-minios-implement-gntalloc-interface.patch
patches.misc/0104-libxc-implement-gntshr-for-minios.patch
patches.misc/0105-stubdom-make-libvchan-available-in-stubdom.patch

# Qubes specific patches
patches.qubes/xen-shared-loop-losetup.patch
patches.qubes/stubdom-vbd-non-dom0-backend.patch
patches.qubes/xen-no-downloads.patch
patches.qubes/xen-hotplug-external-store.patch
patches.qubes/xen-stubdom-qubes-gui.patch
patches.qubes/stubdom-lwip-fix-for-dhcp.patch
patches.qubes/xen-libxl-qubes-minimal-stubdom.patch
patches.qubes/xen-disable-dom0-qemu.patch
patches.qubes/libxl-disable-forced-vkb-for-HVM.patch
patches.qubes/xenconsoled-enable-logging.patch
patches.qubes/vm-0001-hotplug-do-not-attempt-to-remove-containing-xenstore.patch
patches.qubes/xen-hotplug-qubesdb-update.patch
